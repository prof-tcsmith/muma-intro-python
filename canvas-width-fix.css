/* Custom CSS to optimize Quarto content for Canvas LMS iframe display */

/* Reset body margins */
body {
    margin: 0 !important;
    padding: 0 !important;
    overflow-x: hidden !important;
}

/* Fix the main container layout - use grid instead of flex to avoid column issues */
#quarto-content {
    display: grid !important;
    grid-template-columns: 200px 1fr !important;
    gap: 20px !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Position the TOC on the left as a fixed-width column */
#quarto-sidebar-toc-left,
.sidebar.toc-left {
    grid-column: 1 !important;
    width: 200px !important;
    min-width: 200px !important;
    max-width: 200px !important;
    height: 100vh !important;
    overflow-y: auto !important;
    padding: 20px 10px !important;
    background-color: #f8f9fa !important;
    border-right: 1px solid #dee2e6 !important;
    font-size: 0.875rem !important;
    box-sizing: border-box !important;
    margin: 0 !important;
    position: sticky !important;
    top: 0 !important;
}

/* Style the TOC nav element */
nav#TOC,
nav[role="doc-toc"] {
    width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* Ensure TOC links are visible and styled */
.sidebar.toc-left a,
nav[role="doc-toc"] a {
    color: #495057 !important;
    text-decoration: none !important;
    display: block !important;
    padding: 0.25rem 0 !important;
}

.sidebar.toc-left a:hover,
nav[role="doc-toc"] a:hover,
.sidebar.toc-left a.active,
nav[role="doc-toc"] a.active {
    color: #0066cc !important;
    background-color: #e9ecef !important;
    margin-left: -10px !important;
    padding-left: 10px !important;
}

/* Style the main content area - it should fill the second grid column */
main.content,
#quarto-document-content {
    grid-column: 2 !important;
    width: 100% !important;
    max-width: 100% !important;
    padding: 20px !important;
    box-sizing: border-box !important;
    margin: 0 !important;
    overflow-x: auto !important;
    /* Prevent CSS columns which might cause vertical layout */
    column-count: 1 !important;
    -webkit-column-count: 1 !important;
    -moz-column-count: 1 !important;
}

/* Remove any column-based CSS that might cause vertical columns */
.page-columns {
    column-count: 1 !important;
    -webkit-column-count: 1 !important;
    -moz-column-count: 1 !important;
    width: 100% !important;
}

/* Ensure all content respects the width constraint */
.column-body,
.content-column-body,
[class*="column-body"],
.page-layout-article {
    max-width: 100% !important;
    width: 100% !important;
    margin: 0 !important;
    box-sizing: border-box !important;
}

/* Prevent any element from causing horizontal scroll */
* {
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* Sections should not exceed container width */
section {
    max-width: 100% !important;
    width: 100% !important;
    overflow-x: hidden !important;
}

/* Tables should be scrollable if too wide */
.table-responsive,
table {
    display: block !important;
    max-width: 100% !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
}

/* Code blocks should scroll if too wide */
pre {
    max-width: 100% !important;
    overflow-x: auto !important;
    white-space: pre !important;
}

.sourceCode {
    max-width: 100% !important;
    overflow-x: auto !important;
}

/* Images should scale down */
img {
    max-width: 100% !important;
    height: auto !important;
}

/* Fix Bootstrap containers */
.container,
.container-fluid,
.container-lg,
.container-md,
.container-sm,
.container-xl,
.container-xxl {
    max-width: 100% !important;
    width: 100% !important;
    padding-left: 20px !important;
    padding-right: 20px !important;
    box-sizing: border-box !important;
}

/* Remove any left margins from hidden TOC */
#quarto-content.toc-left,
.page-columns.toc-left {
    margin-left: 0 !important;
    padding-left: 0 !important;
}

/* Ensure body doesn't have margins */
body {
    margin: 0 !important;
    padding: 0 !important;
    overflow-x: hidden !important;
}

/* Hide horizontal scrollbar on html element */
html {
    overflow-x: hidden !important;
}

/* Make sure headers are visible */
h1, h2, h3, h4, h5, h6 {
    margin-top: 1.5rem !important;
    margin-bottom: 1rem !important;
    word-wrap: break-word !important;
}

/* Ensure lists don't overflow */
ul, ol {
    padding-left: 1.5rem !important;
    margin-left: 0 !important;
}

/* Fix any Quarto-specific margins */
.page-rows-contents {
    max-width: 100% !important;
    width: 100% !important;
}

/* Prevent column layouts from breaking */
[class*="column-"] {
    float: none !important;
    width: 100% !important;
    margin: 0 !important;
    position: static !important;
}

/* Fix Quarto's div.columns which uses flexbox */
div.columns {
    display: block !important;
    column-count: 1 !important;
    -webkit-column-count: 1 !important;
    -moz-column-count: 1 !important;
}

div.column {
    display: block !important;
    width: 100% !important;
    flex: none !important;
}

/* Ensure Python Tutor iframes are responsive */
iframe {
    max-width: 100% !important;
}

/* Fix any absolute positioned elements */
.sidebar,
.toc-left,
#quarto-sidebar-toc-left {
    position: static !important;
    float: none !important;
    width: auto !important;
}

/* Remove the floating TOC tip since we have a proper sidebar */
#quarto-content::before {
    display: none !important;
}

/* Additional fixes for Quarto's specific layout structure */
#quarto-sidebar-glass {
    display: none !important; /* Remove any overlay glass effects */
}

/* Force proper layout hierarchy */
body > div.page-columns {
    display: flex !important;
    flex-direction: row !important;
}

/* Ensure TOC doesn't float */
.floating {
    position: relative !important;
    float: none !important;
}

/* Fix any z-index issues */
nav[role="doc-toc"],
.sidebar,
#TOC {
    z-index: 1 !important; /* Lower than content */
}

main,
.content {
    z-index: 2 !important; /* Higher than TOC */
    position: relative !important;
}